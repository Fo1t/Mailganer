{% extends "base_generic.html" %}
{% block content %}
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">			    
			    <h1 class="app-page-title">Начать рассылку</h1>
			    <hr class="mb-4">
                <div class="row g-4 settings-section">
	                <div class="col-12 col-md-4">
		                <h3 class="section-title">Новая рассылка</h3>
		                <div class="section-intro">Заполните данные для новой рассылки. <a href="../stats">Открыть прошлые рассылки</a></div>
	                </div>
	                <div class="col-12 col-md-8">
		                <div class="app-card app-card-settings shadow-sm p-4">
						    
						    <div class="app-card-body">
							    <form class="settings-form" method="post">{% csrf_token %}
								    <div class="mb-3">
									    <label for="setting-input-1" class="form-label">Название рассылки</label>
									    {{ form.name }}
									</div>
									<div class="mb-3" hidden>
									    <label for="setting-input-2" class="form-label">Загрузить адресатов из файла</label>
									    {{ form.use_file }}
									</div>
									<script>
										document.getElementById('setting-input-2').addEventListener(
											"click",
											() => {
												elem = document.getElementById("setting-div-3").hidden;
												if (elem) {
													document.getElementById("setting-div-3").hidden = false;
													document.getElementById("setting-div-4").hidden = false;
												} else {
													document.getElementById("setting-div-3").hidden = true;
													document.getElementById("setting-div-4").hidden = false;
												}
											},
										)
									</script>
								    <div class="mb-3" id="setting-div-3" hidden>
									    <label for="setting-input-3" class="form-label">Выбрать файл адресатов(файл в формате email|Имя|Фамилия|Дата рождения) </label>
									    {{ form.file }}
									</div>
									<div class="mb-3" id="setting-div-4" hidden>
									    <label for="setting-input-4" class="form-label">Сохранить адресатов в базу</label>
									    {{ form.save_flag }}
									</div>
									<div class="mb-3">
									    <label for="setting-input-5" class="form-label">Отложенная рассылка</label>
									    {{ form.start_now_flag }}
									</div>
									<script>
										document.getElementById('setting-input-6').addEventListener(
											"click",
											() => {
												elem = document.getElementById("setting-div-6").hidden;
												if (elem) {
													document.getElementById("setting-div-6").hidden = false;
												} else {
													document.getElementById("setting-div-6").hidden = true;
												}
											},
										)
									</script>
									<div class="mb-3" id="setting-div-6" hidden>
									    <label for="setting-input-6" class="form-label">Выбрать дату и время</label>
									    {{ form.start_time }}
									</div>
									<div class="mb-3" id="setting-div-7">
									    <label for="setting-input-7" class="form-label">Выбрать шаблон</label>
									    {{ form.templates }}
									</div>
									<script>document.getElementById('setting-input-1').type = 'datetime-local'</script>
									<button type="submit" class="btn app-btn-primary">Создать рассылку</button>
							    </form>
						    </div><!--//app-card-body-->
						    
						</div><!--//app-card-->
	                </div>
                </div><!--//row-->
                <hr class="my-4">
                
                
                
                
                
			    
		    </div><!--//container-fluid-->
	    </div><!--//app-content-->
	    
	    
		{% endblock %}
    

